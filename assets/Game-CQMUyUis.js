import{d as k,r as b,o as a,c as i,a as s,t as F,n as B,_ as R,u as $,b as x,q,F as _,e as p,f as h,g as I,h as N,i as j,j as w,k as v,K as A}from"./index-DEBLfE-m.js";const E={class:"fighter-wrapper"},S=["src","alt"],T=k({__name:"Fighter",props:{fighter:{type:Object}},setup(u){b(100);const l=u;return(t,c)=>{var d,r,o,n;return a(),i("div",E,[s("div",{class:B({dead:!((d=l.fighter)!=null&&d.isAlive)})},[s("img",{src:(r=l.fighter)==null?void 0:r.animatedImage,alt:(o=u.fighter)==null?void 0:o.name},null,8,S),s("div",null,F((n=l.fighter)==null?void 0:n.name),1)],2)])}}}),V=R(T,[["__scopeId","data-v-bd04dacf"]]),z={class:"wrapper"},G=s("div",{class:"header"},null,-1),K={class:"content"},O=s("div",{class:"left-col"},null,-1),P={class:"arena"},D=["id"],X=k({__name:"Game",setup(u){const l=j(),t=$(),c=b([]);x(()=>{t.updateConfig(q(l.query))});const d=()=>{const r=t.aliveFighters;r.length<2||(t.generateNewRound(),console.log(1),c.value=r.map(()=>t.cookieBuilder.bake()),setTimeout(()=>{const o=Array.from(document.querySelectorAll(".cookie"));t.aliveFighters.forEach((n,e)=>{const m=o[e],g=document.getElementById(n.name).getBoundingClientRect(),f=m.getBoundingClientRect(),y=g.left-f.left,C=g.top-f.top;m.style.transform=`translate(${y}px, ${C}px)`,setTimeout(()=>{m.remove(),n.eat(c.value[e])},1e3)})},100))};return(r,o)=>{const n=w("v-btn");return a(),i(_,null,[s("div",z,[G,s("div",K,[O,s("div",P,[(a(!0),i(_,null,p(h(t).availableFighters,e=>(a(),i("div",{class:"fighter",id:e.name},[v(V,{fighter:e},null,8,["fighter"])],8,D))),256)),(a(!0),i(_,null,p(c.value,e=>(a(),i("div",{class:"cookie",key:e.id},[v(A,{size:"24",poisoned:e.poisoned,calories:e.calories},null,8,["poisoned","calories"])]))),128))])])]),h(t).aliveFighters.length>1?(a(),I(n,{key:0,onClick:o[0]||(o[0]=e=>d())})):N("",!0)],64)}}});export{X as default};
