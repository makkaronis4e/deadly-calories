var S=Object.defineProperty;var I=(t,e,s)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var l=(t,e,s)=>(I(t,typeof e!="symbol"?e+"":e,s),s);import{d as v,c as m,a as o,t as _,F as V,r as L,o as c,n as k,_ as C,b as g,e as f,K as y,p as x,f as N,g as R,h as u,i as B,j as $,u as p,k as D,w as K,l as z,m as G}from"./index-YhkgG9Mu.js";const M=["Kano","Sektor","LiuKang","Sonya","KungLao","Smoke"];var h=(t=>(t.Dead="dead",t.Damaged="damaged",t.Static="static",t.Normal="",t))(h||{});class F{constructor(e,s=5){l(this,"name");l(this,"animatedImage");l(this,"staticImage");l(this,"eating",!1);l(this,"health");l(this,"round",0);l(this,"log",[]);this.name=e,this.animatedImage=`./img/fighters/${h.Normal}/${e.toLowerCase()}.gif`,this.staticImage=`./img/fighters/${h.Static}/${e.toLowerCase()}.png`,this.health=s}calories(){return this.health}get isAlive(){return this.health>0}eat(e){this.isAlive&&(this.round+=1,this.eating=!0,setTimeout(()=>{e.poisoned?(this.health-=e.calories,this.writeLog(`Poisoned cookie! Lost ${e.calories} calories!`)):(this.health+=e.calories,this.writeLog(`Om-nom-nom! Got ${e.calories} calories!`)),this.eating=!1,this.burnCalories()},1e3))}updateAnimation(){const e=this.health<=0?h.Dead:this.health<3?h.Damaged:h.Normal;this.animatedImage=`./img/fighters/${e}/${this.name.toLowerCase()}.gif`}burnCalories(){this.health-=1,this.updateAnimation(),this.writeLog("Round ended. Burned 1 calorie!"),this.health<=0&&this.writeLog("Fighter is dead!")}writeLog(e){const s=this.log.find(a=>a.round===this.round);if(!s){this.log.push({round:this.round,events:[e]});return}s.events.push(e)}}const A={class:"fighters-wrapper"},U={class:"preview"},j=["src"],E={class:"preview__name"},H={class:"grid"},O=["onClick"],P=["src","alt"],q=v({__name:"FighterGrid",props:{fighters:Array,activeFighter:F},emits:["fighterSelected"],setup(t){const e=t;return(s,a)=>{var r,d;return c(),m("div",A,[o("div",U,[o("img",{src:(r=e.activeFighter)==null?void 0:r.animatedImage,alt:"Active Fighter"},null,8,j),o("div",E,_((d=e.activeFighter)==null?void 0:d.name),1)]),o("div",H,[(c(!0),m(V,null,L(e.fighters,i=>{var n;return c(),m("div",{class:k(["grid__item",{active:((n=e.activeFighter)==null?void 0:n.name)===i.name}]),onClick:()=>s.$emit("fighterSelected",i),key:i.name},[o("img",{src:i.staticImage,alt:i.name},null,8,P)],10,O)}),128))])])}}}),J=C(q,[["__scopeId","data-v-40e3b459"]]),Q="/deadly-calories/img/poison.webp",T="/deadly-calories/img/hp.webp",w=t=>(x("data-v-d6e3272f"),t=t(),N(),t),W={class:"config-wrapper"},X={class:"control"},Y={class:"control__header"},Z=w(()=>o("img",{src:Q,alt:"Poison"},null,-1)),ee={class:"control"},te={class:"control__header"},se=w(()=>o("img",{src:T,alt:"Health points"},null,-1)),oe={class:"control"},ie={class:"control__header"},ae=v({__name:"CompetitionConfig",props:{configForm:Object},setup(t){const e=t;return(s,a)=>{const r=f("v-text-field"),d=f("v-range-slider");return c(),m("div",W,[o("div",X,[o("div",Y,[Z,o("span",null,_(s.$t("config.poison_chance")),1)]),g(r,{modelValue:e.configForm.poisonChance,"onUpdate:modelValue":a[0]||(a[0]=i=>e.configForm.poisonChance=i),modelModifiers:{number:!0},"hide-details":"",max:"0.1",min:"0.9","single-line":""},null,8,["modelValue"])]),o("div",ee,[o("div",te,[se,o("span",null,_(s.$t("config.initial_calories")),1)]),g(r,{modelValue:e.configForm.startingCalories,"onUpdate:modelValue":a[1]||(a[1]=i=>e.configForm.startingCalories=i),modelModifiers:{number:!0},"hide-details":"",max:10,min:3,"single-line":""},null,8,["modelValue"])]),o("div",oe,[o("div",ie,[g(y,{size:"24"}),o("span",null,_(s.$t("config.calories_range")),1)]),g(d,{modelValue:e.configForm.caloriesRange,"onUpdate:modelValue":a[2]||(a[2]=i=>e.configForm.caloriesRange=i),max:"3",min:"0.1",step:"0.1","thumb-size":"10",class:"align-center","thumb-label":"always"},null,8,["modelValue"])])])}}}),ne=C(ae,[["__scopeId","data-v-d6e3272f"]]),re=R("config",{state:()=>({config:{caloriesRange:[.2,2],poisonChance:.2,startingCalories:5}}),actions:{updateConfig(t){this.config=t}}}),le={key:0,class:"left-col"},ce={class:"title"},de={class:"right-col"},he={class:"fighters-grid"},ge=v({__name:"Config",setup(t){let e=u([]),s=u(null);const a=re(),r=u({caloriesRange:[.2,2],poisonChance:.2,startingCalories:5});B(()=>{e.value=M.map(n=>new F(n)),s.value=e.value[0]});const d=n=>{s.value=n},i=n=>{a.updateConfig(r.value)};return(n,me)=>{const b=f("v-btn");return c(),m("form",{class:"wrapper",onSubmit:z(i,["prevent"])},[r.value?(c(),m("div",le,[o("h3",ce,_(n.$t("config.create_config")),1),g(ne,{"config-form":r.value},null,8,["config-form"])])):$("",!0),o("div",de,[o("div",he,[p(s)?(c(),D(J,{key:0,onFighterSelected:d,"active-fighter":p(s),fighters:p(e)},null,8,["active-fighter","fighters"])):$("",!0)]),g(b,{type:"submit",class:"start",size:"x-large",color:"var(--mk-main-color)"},{default:K(()=>[G(_(n.$t("config.serve")),1)]),_:1})])],32)}}}),pe=C(ge,[["__scopeId","data-v-7ce7f384"]]);export{pe as default};
