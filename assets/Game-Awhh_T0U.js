import{d as k,o as s,c as o,a as t,t as r,F as v,r as f,n as w,_ as x,u as q,b as F,e as z,q as P,f as g,w as $,g as m,h as T,i as A,j as G,k as N,l as b,K as j}from"./index-BC7BrS2w.js";const E={class:"character-wrapper"},O={class:"log"},S={class:"log__title"},V={class:"log__content"},D={class:"log__item"},K={class:"log__round"},L={class:"log__events"},H=["src","alt"],M={class:"character__data"},X={class:"character__name"},Y={class:"character__hp"},J=k({__name:"Fighter",props:{fighter:{type:Object,required:!0}},setup(h){const a=h;return(e,c)=>(s(),o("div",E,[t("div",O,[t("div",S,r(a.fighter.name)+" Game Logs",1),t("div",V,[(s(!0),o(v,null,f(a.fighter.log,l=>(s(),o("div",D,[t("div",K,r(e.$t("game.round",{num:l.round})),1),(s(!0),o(v,null,f(l.events,i=>(s(),o("div",L,r(i),1))),256))]))),256))])]),t("div",{class:w([{dead:!a.fighter.isAlive},"character"])},[t("img",{src:a.fighter.animatedImage,alt:h.fighter.name},null,8,H),t("div",M,[t("span",X,r(a.fighter.name),1),t("span",Y,r(a.fighter.percentageOfHealth),1)])],2)]))}}),Q=x(J,[["__scopeId","data-v-9532c7f1"]]),U={class:"rounds"},W={class:"rounds__title"},Z=["onClick"],ee=k({__name:"RoundsProgress",props:{rounds:{type:Array}},emits:["reset"],setup(h,{emit:a}){const e=a;return(c,l)=>(s(),o("div",U,[t("div",W,r(c.$t("game.rounds")),1),(s(!0),o(v,null,f(h.rounds,i=>(s(),o("div",{onClick:R=>e("reset",i.num),class:w(["rounds__item",{finished:i.finished}]),key:i.num},r(i.num+1),11,Z))),128))]))}}),te=x(ee,[["__scopeId","data-v-8b090d2b"]]),se={class:"wrapper"},oe={class:"header"},ne={class:"right-buttons"},ae={class:"content"},re={class:"left-col"},ie={class:"rounds-wrapper"},le={class:"arena"},ce=["id"],ue=k({__name:"Game",setup(h){const a=T(),e=q(),c=F([]),l=F(!1);z(()=>{e.updateConfig(P(a.query))});const i=()=>{A("Game_logs",[...G(e.availableFighters)])},R=()=>{const d=e.aliveFighters;d.length<2||(l.value=!0,e.generateNewRound(),c.value=d.map(()=>e.cookieBuilder.bake()),setTimeout(()=>{const _=Array.from(document.querySelectorAll(".cookie"));e.aliveFighters.forEach((u,n)=>{const p=_[n],y=document.getElementById(u.name).getBoundingClientRect(),C=p.getBoundingClientRect(),B=y.left-C.left,I=y.top-C.top;p.style.transform=`translate(${B}px, ${I}px)`,setTimeout(()=>{p.remove(),u.eat(c.value[n]),e.finishRound(),l.value=!1},1e3)})},100))};return(d,_)=>{const u=N("v-btn");return s(),o("div",se,[t("div",oe,[g(u,{disabled:l.value||m(e).aliveFighters.length<2,onClick:_[0]||(_[0]=n=>R()),size:"x-large",color:"var(--mk-main-color)"},{default:$(()=>[b(r(d.$t("game.start")),1)]),_:1},8,["disabled"]),t("div",ne,[g(u,{to:"/",variant:"outlined",size:"x-large"},{default:$(()=>[b(r(d.$t("game.back")),1)]),_:1}),g(u,{disabled:m(e).rounds.length===0,onClick:_[1]||(_[1]=n=>i()),size:"x-large"},{default:$(()=>[b(r(d.$t("game.download")),1)]),_:1},8,["disabled"])])]),t("div",ae,[t("div",re,[t("div",ie,[g(te,{onReset:m(e).resetToRound,rounds:m(e).rounds},null,8,["onReset","rounds"])])]),t("div",le,[(s(!0),o(v,null,f(m(e).availableFighters,n=>(s(),o("div",{class:"fighter",id:n.name},[g(Q,{fighter:n},null,8,["fighter"])],8,ce))),256)),(s(!0),o(v,null,f(c.value,n=>(s(),o("div",{class:"cookie",key:n.id},[g(j,{size:"24",poisoned:n.poisoned,calories:n.calories},null,8,["poisoned","calories"])]))),128))])])])}}});export{ue as default};
